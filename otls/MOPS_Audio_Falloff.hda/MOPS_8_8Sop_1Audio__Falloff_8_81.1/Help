= MOPs Audio Falloff = 

#icon: opdef:.?mops_falloff_04.svg

"""Generates falloff values based on audio amplitudes."""

The MOPs Audio Falloff generates @mops_falloff values based on the amplitude of a sound file. 
If incoming points already have a @mops_falloff attribute, that value can be mapped to an arbitrary number of "bands" representing user-defined frequency ranges.
This allows you to have low frequencies affect the falloff value of certain objects, and higher frequencies affect other objects.

:TIP
    This node by default will split your objects up evenly into "bands" based on the point number and the number of bands you create in the Bands tab. If you want to be more precise in how objects are placed into bands, disable Auto Distribute and choose a point attribute to map with.

== Overview ==

@inputs

Packed Primitives:
    Plug in MOPs primitives here.
    
@parameters

== General ==

Falloff Attribute:
    #id: falloff_attr
    The point attribute to use as the falloff attribute.
    
Blend Mode:
    #id: blend_mode
    The blend mode for combining the effects of this operator with any previous falloff value. See [MOPs Combine Falloffs|Node:sop/MOPS--Combine_Falloffs-1.0] for details.

Blend Strength:
    #id: strength
    The blend weight for the value generated by this Falloff.
    
Clamp:
    #id: switchclamp
    Clamp the resulting Falloff value to a 0-1 range.
    
Preview Falloff:
    #id: do_preview
    Enable display of the falloff values in the viewport.
    
== File ==

File:
    #id: file
    The audio file to read.
    
Rate Options:
    #id: rateoption
    Whether or not to resample the incoming file.
    
Sample Rate:
    #id: rate
    If resampling, the sample rate to use. Higher numbers provide more accurate information, but will be slower to process.
    
Extend Left:
    #id: left
    How to interpret incoming audio data before the actual start time of the clip.
    
Extend Right:
    #id: right
    How to interpret incoming audio data after the end time of the clip.
    
== Trim & Shift ==

These controls can be used to adjust the start and end times of the incoming audio clip. See the help on the [Shift CHOP|Node:chop/shift] and [Trim CHOP|Node:chop/trim] for details.

== Bands ==

This section allows you to create pass filters that break up the incoming audio frequencies into "bands." The amplitude of each band will be assigned to the incoming objects based on the @mops_falloff value and the band number.
For example, if you have two bands, objects with a @mops_falloff value of 0.0-0.5 will be assigned to Band 0, and objects with a @mops_falloff value of 0.51-1.0 will be assigned to Band 1.

Bands:
    #id: bands
    The number of bands to create.
    
Filter:
    #id: filter#
    The type of filter to use to define this band:
            * Low Pass: Any frequencies below the High Cutoff are considered part of this band.
            * High Pass: Any frequencies above the Low Cutoff are considered part of this band.
            * Band Pass: Any frequencies in between the Low and High Cutoff are considered part of this band.
            * Band Stop: Any frequencies outside of the range between the Low and High Cutoff are considered part of this band.
Low Cutoff:
    #id: cutofflow#
    The minimum frequency defining this band.
    
High Cutoff:
    #id: cutoffhigh#
    The maximum frequency defining this band.
    
Pass Gain:
    #id: gain#
    Scales the amplitude (gain) of the frequency inside the defined band.
    
Rolloff Factor:
    #id: rolloff#
    How the filter drops off at the cutoff frequencies. Low values (less than one) produce more gradual rolloff, and higher values produce sharper filters.

=== Band Options ===

Preview Bands:
    #id: preview_bands
    Display the distribution of bands as a color attribute.
    
Auto Distribute:
    #id: auto_distribute 
    If enabled, automatically distribute the bands evenly based on point number. If disabled, MOPs Audio Falloff will use the Band Attribute to determine the mapping of points or packed primitives to bands.
    
Band Attribute:
    #id: If Auto Distribute is disabled, use this point attribute to map points or packed primitives to bands.
    
Band Weighting:
    #id: distribute_ramp
    Adjust the weight of the incoming Band Attribute values' mapping to bands.
    
== Processing ==

=== Envelope ===

Enabling Envelope will output the maximum amplitude found within the Envelope Width of each sample. It's a way of averaging out the incoming audio signal.
See the Help page on the [Envelope CHOP|Node:chop/envelope] for details on parameters.

=== Filter ===

Enabling Filter allows for several different blurring and sharpening effects on the incoming audio signal. This can be used to smooth out jittery motion, for example.
See the Help page on the [Filter CHOP|Node:chop/filter] for details on parameters.

== Remap ==

Fit:
    #id: switchfit

    Enable falloff remapping.
    
Auto min and max input values:
    #id: auto_min_max
    
    Automatically determine the minimum and maximum values to remap from.
    
Reference Frame:
    #id: frame
    The frame to use when computing the automatic minimum and maximum to remap from.
    
Input min: 
    #id: imin
    The minimum value to remap from.
    
Input Max:
    #id: imax
    The maximum value to remap from.
    
Output Min:
    #id: omin
    The minimum value to remap to.
    
Output Max:
    #id: omax
    The maximum value to remap to.
    
Remap Falloff:
    #id: remap_falloff
    A ramp that can be used to fine-tune the remapping values.
    